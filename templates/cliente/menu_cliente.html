{% extends 'base.html' %}
{% load static %}

{% block title %}MenÃº - BullBurger{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/cliente_style.css' %}">


<section class="cliente-bg">
  <h1 class="titulo-menu">MenÃº BullBurger ğŸ”</h1>

  <!-- CategorÃ­as -->
  <div class="categorias">
    <button class="categoria activo" data-category="all">
      <span>ğŸ½ï¸ Todos</span>
    {% for categoria in categorias %}
      <button class="categoria" data-category="{{ categoria.id }}">
        <span>
                {% if categoria.nombre == 'Hamburguesas' %}ğŸ”
                {% elif categoria.nombre == 'Bebidas' %}ğŸ¥¤
                {% elif categoria.nombre == 'Snacks' %}ğŸŸ
                {% elif categoria.nombre == 'Combos' %}ğŸ“¦
                {% elif categoria.nombre == 'Postres' %}ğŸ¦
                {% else %}ğŸ½ï¸{% endif %}
                {{ categoria.nombre }}
            </span>
    {% endfor %}
  </div>

  <!-- Productos -->
  <div class="products-grid">
        {% for producto in productos %}
        <div class="product-card" data-category="{{ producto.categoria.id }}">
            <div class="product-image">
                {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                {% elif producto.imagen_url %}
                <img src="{{ producto.imagen_url }}" alt="{{ producto.nombre }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                {% endif %}
                <div class="image-placeholder" {% if producto.imagen or producto.imagen_url %}style="display: none;"{% endif %}>
                    {% if producto.categoria.nombre == 'Hamburguesas' %}ğŸ”
                    {% elif producto.categoria.nombre == 'Bebidas' %}ğŸ¥¤
                    {% elif producto.categoria.nombre == 'Snacks' %}ğŸŸ
                    {% elif producto.categoria.nombre == 'Combos' %}ğŸ“¦
                    {% elif producto.categoria.nombre == 'Postres' %}ğŸ¦
                    {% else %}ğŸ½ï¸{% endif %}
                </div>
            </div>
            <div class="product-info">
                <h3>{{ producto.nombre }}</h3>
                <p class="product-description">{{ producto.descripcion|default:"Sin descripciÃ³n" }}</p>
                <div class="product-price">${{ producto.precio }}</div>
                <div class="product-category">
                    <small>CategorÃ­a: {{ producto.categoria.nombre }}</small>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="no-products">
            <h3>No hay productos en el menÃº</h3>
            <p>Haz clic en "Agregar Nuevo Producto" para comenzar</p>
        </div>
        {% endfor %}
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const categoryButtons = document.querySelectorAll('.categoria');
  const productos = document.querySelectorAll('.product-card');

  categoryButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      categoryButtons.forEach(b => b.classList.remove('activo'));
      btn.classList.add('activo');
      const categoria = btn.getAttribute('data-category');

      productos.forEach(prod => {
        if (categoria === 'all' || prod.getAttribute('data-category') === categoria) {
          prod.style.display = 'block';
        } else {
          prod.style.display = 'none';
        }
      });
    });
  });
});
</script>
{% endblock %}
