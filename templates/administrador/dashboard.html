{% extends 'base.html' %}
{% load static %}

{% block title %}Inicio Admin - BullBurger{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/admin_style.css' %}">

<div class="admin-bg">
    <div class="admin-container">

        <h1 class="admin-title">HOLA, {{ user.nombre|default:'ADMIN'|upper }}</h1>
        <p class="admin-subtitle">
            Bienvenido a <strong>BullBurger</strong>. Este es tu centro de control üçî
        </p>

        <div class="dashboard-grid-container">

            <div class="dashboard-section-card">
                <div class="card-header">
                    <span class="icon">üìà</span>
                    <h2>Resumen de Pedidos</h2>
                </div>
                <div class="card-body">
                    <div class="stat-hero success">
                        <p>Ventas Totales (Entregado)</p>
                        <h3>${{ ventas_totales|floatformat:2 }}</h3>
                    </div>
                    <div class="stat-list">
                        <div class="stat-item">
                            <h4 class="warning-text">{{ pedidos_pendientes }}</h4>
                            <p>Pendientes</p>
                        </div>
                        <div class="stat-item">
                            <h4 class="info-text">{{ pedidos_preparando }}</h4>
                            <p>En Preparaci√≥n</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-section-card">
                <div class="card-header">
                    <span class="icon">üì¶</span>
                    <h2>Estado del Inventario</h2>
                </div>
                <div class="card-body">
                    <div class="stat-hero">
                        <p>Valor Total del Inventario</p>
                        <h3>${{ valor_total_inventario|floatformat:2 }}</h3>
                    </div>
                    <div class="stat-list">
                        <div class="stat-item">
                            <h4>{{ total_ingredientes }}</h4>
                            <p>Ingredientes</p>
                        </div>
                        <div class="stat-item">
                            <h4 class="warning-text">{{ total_stock_bajo }}</h4>
                            <p>Stock Bajo</p>
                        </div>
                        <div class="stat-item">
                            <h4 class="danger-text">{{ total_stock_agotado }}</h4>
                            <p>Agotados</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-section-card">
                <div class="card-header">
                    <span class="icon">üçî</span>
                    <h2>Resumen del Men√∫</h2>
                </div>
                <div class="card-body">
                    <div class="stat-list full">
                        <div class="stat-item large">
                            <h4>{{ total_productos }}</h4>
                            <p>Productos en Men√∫</p>
                        </div>
                        <div class="stat-item large">
                            <h4>{{ total_categorias }}</h4>
                            <p>Categor√≠as Creadas</p>
                        </div>
                    </div>
                </div>
            </div>

        </div> </div>
</div>

<style>
    /* A√±ade estos estilos a tu 'admin_style.css' 
      o d√©jalos aqu√≠ dentro del bloque <style>
    */

    /* Contenedor principal de la cuadr√≠cula */
    .dashboard-grid-container {
        display: grid;
        /* Crea 3 columnas, pero se ajustar√°n a 1 en m√≥viles */
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 30px;
    }

    /* La tarjeta de secci√≥n principal */
    .dashboard-section-card {
        background-color: #ffffff;
        border-radius: 16px; /* Bordes m√°s suaves */
        box-shadow: 0 8px 25px rgba(0,0,0,0.07);
        border: 1px solid #f0f0f0;
        overflow: hidden; /* Para que el header se alinee bien */
        display: flex;
        flex-direction: column;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .dashboard-section-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 30px rgba(0,0,0,0.1);
    }

    /* Encabezado de la tarjeta (Icono + T√≠tulo) */
    .card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 20px 25px;
        border-bottom: 1px solid #f0f0f0;
        background: linear-gradient(135deg, #fafafa 0%, #ffffff 100%);
    }
    .card-header .icon {
        font-size: 24px;
        line-height: 1;
    }
    .card-header h2 {
        margin: 0;
        font-size: 18px; /* Un poco m√°s grande y claro */
        font-weight: 600;
        color: #333;
    }

    /* Cuerpo de la tarjeta */
    .card-body {
        padding: 25px;
        display: flex;
        flex-direction: column;
        flex-grow: 1; /* Para que todas las tarjetas tengan la misma altura */
    }

    /* Estad√≠stica H√©roe (el n√∫mero grande) */
    .stat-hero {
        text-align: center;
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 1px dashed #e0e0e0;
    }
    .stat-hero p {
        margin: 0 0 5px 0;
        font-size: 15px;
        color: #555;
        font-weight: 500;
    }
    .stat-hero h3 {
        margin: 0;
        font-size: 42px; /* ¬°Grande! */
        font-weight: 700;
        color: #222;
        line-height: 1.1;
    }
    /* Color para ventas */
    .stat-hero.success h3 {
        color: #28a745;
    }

    /* Lista de estad√≠sticas secundarias */
    .stat-list {
        display: grid;
        grid-template-columns: 1fr 1fr; /* 2 columnas por defecto */
        gap: 20px;
        margin-top: auto; /* Empuja al fondo si la tarjeta es alta */
    }

    /* Para la tarjeta de Men√∫ que solo tiene 2 stats */
    .stat-list.full {
        grid-template-columns: 1fr; /* 1 columna */
        gap: 15px;
    }

    .stat-item {
        background-color: #f9f9f9;
        border-radius: 10px;
        padding: 15px;
        border: 1px solid #eee;
    }

    /* Tarjeta de Men√∫ con items m√°s grandes */
    .stat-item.large {
        padding: 20px;
        text-align: center;
    }

    .stat-item h4 {
        margin: 0 0 4px 0;
        font-size: 28px;
        font-weight: 600;
        color: #333;
    }
    .stat-item p {
        margin: 0;
        font-size: 13px;
        color: #666;
        font-weight: 500;
    }

    /* Clases de color para los N√öMEROS */
    .warning-text { color: #f59e0b; }
    .danger-text { color: #e53935; }
    .info-text { color: #1e88e5; }
    .success-text { color: #28a745; }


    /* --- Eliminamos los estilos antiguos --- */
    /* (Puedes borrar esto de tu CSS si quieres) */
    .stats-grid.dashboard-stats,
    .stat-card,
    .stat-card:hover,
    .stat-card .stat-icon,
    .stat-card .stat-info h3,
    .stat-card .stat-info p,
    .stat-card.warning .stat-icon,
    .stat-card.warning .stat-info h3,
    .stat-card.danger .stat-icon,
    .stat-card.danger .stat-info h3,
    .stat-card.success .stat-icon,
    .stat-card.success .stat-info h3,
    .stat-card.info .stat-icon,
    .stat-card.info .stat-info h3 {
        /* Estos estilos ya no se usan con el nuevo HTML */
        /* Es mejor borrarlos de 'admin_style.css' */
    }

</style>
{% endblock %}